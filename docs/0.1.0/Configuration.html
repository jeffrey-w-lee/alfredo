<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">











<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Alfredo - Alfredo, Java HTTP SPNEGO - Configuration</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
          <meta name="author" content="Alejandro Abdelnur" />
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      </head>
  <body class="composite">
    <div id="banner">
                    <span id="bannerLeft">
    
            Â 
    
            </span>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
          
  

  
    
            
  
    
            <div class="xleft">
        Last Published: 2011-01-23
                      </div>
            <div class="xright">            <a href="../index.html">OTHER RELEASES</a>
            |
                <a href="http://www.cloudera.com/" class="externalLink">Cloudera</a>
            
  

  
    
            
  
    
             Version: 0.1.0
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
           
  

  
    
            
  
    
                                                <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
            <img alt="Built by Maven" src="./images/logos/maven-feather.png"></img>
          </a>
                       
  

  
    
            
  
    
        </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section"><h2>Alfredo, Java HTTP SPNEGO - Configuration</h2>
<div class="section"><h3>Server Side Configuration Setup</h3>
<p>The <a href="apidocs/com/cloudera/alfredo/server/AuthenticationFilter.html">AuthenticationFilter filter</a> is Alfredo's server side component.</p>
<p>This filter must be configured in front of all the web application resources that required authenticated requests. For example:</p>
<p>The Alfredo and dependent JAR files must be in the web application classpath (commonly the <tt>WEB-INF/lib</tt> directory).</p>
<p>Alfredo uses SLF4J-API for logging. Alfredo Maven POM dependencies define the SLF4J API dependency but it does not define the dependency on a concrete logging implementation, this must be addded explicitly to the web application. For example, if the web applicationan uses Log4j, the SLF4J-LOG4J12 and LOG4J jar files must be part part of the web application classpath as well as the Log4j configuration file.</p>
<div class="section"><h4>Common Configuration parameters</h4>
<ul><li><tt>config.prefix</tt>: If specified, all other configuration parameter names must start with the prefix. The default value is no prefix.</li>
<li><tt>[PREFIX.]authentication.type</tt>: the authentication type keyword (<tt>simple&gt;&gt; or &lt;&lt;&lt;kerberos</tt>) or a <a href="apidocs/com/cloudera/alfredo/server/AuthenticationHandler.html">Authentication handler implementation</a>.</li>
<li><tt>[PREFIX.]signature.secret</tt>: The secret to SHA-sign the generated authentication tokens. If a secret is not provided a random secret is generated at start up time. If using multiple web application instances behind a load-balancer a secret must be set for the application to work properly.</li>
<li><tt>[PREFIX.]auth.token.validity</tt>: The validity -in seconds- of the generated authentication token. The default value is <tt>3600</tt> seconds.</li>
</ul>
</div>
<div class="section"><h4>Kerberos Configuration</h4>
<p><b>IMPORTANT</b>: A KDC must be configured and running.</p>
<p>To use Kerberos SPNEGO as the authentication mechanism, the authentication filter must be configured with the following init parameters:</p>
<ul><li><tt>[PREFIX.]authentication.type</tt>: the keyword <tt>kerberos</tt>.</li>
<li><tt>[PREFIX.]kerberos.principal</tt>: The web-application Kerberos principal name. The Kerberos principal name must start with <tt>HTTP/...</tt>. For example: <tt>HTTP/localhost@LOCALHOST</tt>. There is no default value.</li>
<li><tt>[PREFIX.]kerberos.keytab</tt>: The path to the keytab file containing the credentials for the kerberos principal. For example: <tt>/Users/tucu/alfredo.keytab</tt>. There is no default value.</li>
<li><b>Example</b>:<div class="source"><pre>&lt;web-app version=&quot;2.5&quot; xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot;&gt;
    ...

    &lt;filter&gt;
        &lt;filter-name&gt;kerberosFilter&lt;/filter-name&gt;
        &lt;filter-class&gt;com.cloudera.alfredo.server.AuthenticationFilter&lt;/filter-class&gt;
        &lt;init-param&gt;
            &lt;param-name&gt;authentication.type&lt;/param-name&gt;
            &lt;param-value&gt;kerberos&lt;/param-value&gt;
        &lt;/init-param&gt;
        &lt;init-param&gt;
            &lt;param-name&gt;kerberos.principal&lt;/param-name&gt;
            &lt;param-value&gt;HTTP/localhost@LOCALHOST&lt;/param-value&gt;
        &lt;/init-param&gt;
        &lt;init-param&gt;
            &lt;param-name&gt;kerberos.keytab&lt;/param-name&gt;
            &lt;param-value&gt;/tmp/alfredo.keytab&lt;/param-value&gt;
        &lt;/init-param&gt;
        &lt;init-param&gt;
            &lt;param-name&gt;auth.token.validity&lt;/param-name&gt;
            &lt;param-value&gt;30&lt;/param-value&gt;
        &lt;/init-param&gt;
    &lt;/filter&gt;

    &lt;filter-mapping&gt;
        &lt;filter-name&gt;kerberosFilter&lt;/filter-name&gt;
        &lt;url-pattern&gt;/kerberos/*&lt;/url-pattern&gt;
    &lt;/filter-mapping&gt;

    ...
&lt;/web-app&gt;</pre>
</div>
</li>
</ul>
</div>
<div class="section"><h4>Pseudo/Simple Configuration</h4>
<p>To use Pseudo/Simple as the authentication mechanism (trusting the value of the query string parameter 'user.name'), the authentication filter must be configured with the following init parameters:</p>
<ul><li><tt>[PREFIX.]authentication.type</tt>: the keyword <tt>simple</tt>.</li>
<li><tt>[PREFIX.]annonymous.allowed</tt>: is a boolean parameter that indicates if annonymous requests are allowed or not. The default value is <tt>false</tt>.</li>
<li><b>Example</b>:<div class="source"><pre>&lt;web-app version=&quot;2.5&quot; xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot;&gt;
    ...

    &lt;filter&gt;
        &lt;filter-name&gt;simpleFilter&lt;/filter-name&gt;
        &lt;filter-class&gt;com.cloudera.alfredo.server.AuthenticationFilter&lt;/filter-class&gt;
        &lt;init-param&gt;
            &lt;param-name&gt;authentication.type&lt;/param-name&gt;
            &lt;param-value&gt;simple&lt;/param-value&gt;
        &lt;/init-param&gt;
        &lt;init-param&gt;
            &lt;param-name&gt;annonymous.allowed&lt;/param-name&gt;
            &lt;param-value&gt;false&lt;/param-value&gt;
        &lt;/init-param&gt;
        &lt;init-param&gt;
            &lt;param-name&gt;auth.token.validity&lt;/param-name&gt;
            &lt;param-value&gt;30&lt;/param-value&gt;
        &lt;/init-param&gt;
    &lt;/filter&gt;

    &lt;filter-mapping&gt;
        &lt;filter-name&gt;simpleFilter&lt;/filter-name&gt;
        &lt;url-pattern&gt;/simple/*&lt;/url-pattern&gt;
    &lt;/filter-mapping&gt;

    ...
&lt;/web-app&gt;</pre>
</div>
</li>
</ul>
</div>
</div>
</div>

      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">&#169;  
          2011
    
          Cloudera Inc.
          
  

  
    
            
  
    
   - <a href="http://maven.apache.org/privacy-policy.html">Privacy Policy</a></div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
