<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">











<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Alfredo - Alfredo, Java HTTP SPNEGO 0.1.5 - Building It</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
          <meta name="author" content="Alejandro Abdelnur" />
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      </head>
  <body class="composite">
    <div id="banner">
                    <span id="bannerLeft">
    
            Â 
    
            </span>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
          
  

  
    
            
  
    
            <div class="xleft">
        Last Published: 2012-02-13
                      </div>
            <div class="xright">            <a href="../index.html">OTHER RELEASES</a>
            |
                <a href="http://www.cloudera.com/" class="externalLink">Cloudera</a>
            
  

  
    
            
  
    
             Version: 0.1.5
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
           
  

  
    
            
  
    
                                                <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
            <img alt="Built by Maven" src="./images/logos/maven-feather.png"></img>
          </a>
                       
  

  
    
            
  
    
        </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section"><h2>Alfredo, Java HTTP SPNEGO 0.1.5 - Building It</h2>
<p>[ <a href="index.html">Go Back</a> ]</p>
<div class="section"><h3>Requirements</h3>
<ul><li>Java 6+</li>
<li>Maven 3+</li>
</ul>
</div>
<div class="section"><h3>Source location</h3>
<ul><li>GitHub URL: <a class="externalLink" href="https://github.com/cloudera/alfredo">https://github.com/cloudera/alfredo</a></li>
<li>Git URL: <tt>git://github.com/cloudera/alfredo.git</tt></li>
</ul>
</div>
<div class="section"><h3>Building and testing</h3>
<p>Use Maven goals: clean, test, compile, package, site, install</p>
</div>
<div class="section"><h3>Testing Configuration</h3>
<p>The following <tt>-D</tt> options can be used with Maven to change test configuration options:</p>
<ul><li><tt>alfredo.test.kerberos.realm</tt>: default value <b>LOCALHOST</b></li>
<li><tt>alfredo.test.kerberos.client.principal</tt>: default value <b>client@LOCALHOST</b></li>
<li><tt>alfredo.test.kerberos.server.principal</tt>: default value <b>HTTP/localhost@LOCALHOST</b></li>
<li><tt>alfredo.test.kerberos.keytab.file</tt>: default value <b>$<a name="HOME">HOME</a>/$<a name="USER">USER</a>.keytab</b></li>
</ul>
</div>
<div class="section"><h3>Doing a Release</h3>
<div class="section"><h4>Checklist</h4>
<ul><li>README file must be updated to list the version being released as an available version</li>
<li>Update the <tt>alfredo/src/site/docs.html</tt> page to include a link to the docs of the version being released</li>
<li>Push the local commits to the GitHub repository</li>
</ul>
</div>
<div class="section"><h4>Update the Version, Tag the Repository, Deploy the POM/JARs to the Maven Repository</h4>
<p>Use the <tt>mvn release:prepare</tt> and <tt>mvn release:perform</tt> commands.</p>
<p>The following instructions will:</p>
<ul><li>Update the versions in POMs to the release version</li>
<li>Tag the commit with the release version</li>
<li>Update the versions in the POMs to the next development version</li>
<li>Deploy the POM/JARs to the Maven Repository<p>For the tag name use exactly the release number (i.e. <tt>0.1.2</tt>).</p>
<p><b>IMPORTANT:</b> Write permission to the GitHub repository and to the CDH release Maven repository are required.</p>
<p><b>Example:</b></p>
<div class="source"><pre>$ mvn release:prepare

...
[INFO] Checking dependencies and plugins for snapshots ...
What is the release version for &quot;Alfredo, Java HTTP SPNEGO Main&quot;? (com.cloudera.alfredo:alfredo-main) 0.1.2: :
What is the release version for &quot;Alfredo, Java HTTP SPNEGO&quot;? (com.cloudera.alfredo:alfredo) 0.1.2: :
What is the release version for &quot;Alfredo, Java HTTP SPNEGO Examples&quot;? (com.cloudera.alfredo:alfredo-examples) 0.1.2: :
What is SCM release tag or label for &quot;Alfredo, Java HTTP SPNEGO Main&quot;? (com.cloudera.alfredo:alfredo-main) alfredo-main-0.1.2: : 0.1.2
What is the new development version for &quot;Alfredo, Java HTTP SPNEGO Main&quot;? (com.cloudera.alfredo:alfredo-main) 0.1.3-SNAPSHOT: :
What is the new development version for &quot;Alfredo, Java HTTP SPNEGO&quot;? (com.cloudera.alfredo:alfredo) 0.1.3-SNAPSHOT: :
What is the new development version for &quot;Alfredo, Java HTTP SPNEGO Examples&quot;? (com.cloudera.alfredo:alfredo-examples) 0.1.3-SNAPSHOT: :
[INFO] Transforming 'Alfredo, Java HTTP SPNEGO Main'...
...
[INFO] Release preparation complete.
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary:
[INFO]
[INFO] Alfredo, Java HTTP SPNEGO Main .................... SUCCESS [35.426s]
[INFO] Alfredo, Java HTTP SPNEGO ......................... SUCCESS [0.025s]
[INFO] Alfredo, Java HTTP SPNEGO Examples ................ SUCCESS [0.016s]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS


$ mvn release:perform

...
[INFO] ------------------------------------------------------------------------
[INFO] Building Alfredo, Java HTTP SPNEGO Main 0.1.3-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO]
[INFO] --- maven-release-plugin:2.0:perform (default-cli) @ alfredo-main ---
[INFO] Checking out the project to perform the release ...
...
[INFO] Alfredo, Java HTTP SPNEGO Main .................... SUCCESS [24.711s]
[INFO] Alfredo, Java HTTP SPNEGO ......................... SUCCESS [0.024s]
[INFO] Alfredo, Java HTTP SPNEGO Examples ................ SUCCESS [0.015s]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 25.735s
[INFO] Finished at: Mon Jan 24 11:03:07 SGT 2011
[INFO] Final Memory: 7M/81M
[INFO] ------------------------------------------------------------------------

$
</pre>
</div>
</li>
</ul>
</div>
<div class="section"><h4>Publish the Documentation</h4>
<p>Checkout the release tag and run <tt>mvn clean install site</tt>.</p>
<p><b>IMPORTANT:</b> The <tt>install</tt> goal must be used to install the <tt>alfredo</tt> artifact in the local Maven cache, otherwise the <tt>site</tt> goal will fail when processing the <tt>examples</tt>.</p>
<p><b>Example:</b></p>
<div class="source"><pre>$ git checkout 0.1.2
Previous HEAD position was a642b05... [maven-release-plugin] prepare release 0.1.3
HEAD is now at 94d0f23... [maven-release-plugin] prepare release 0.1.2

$ mvn clean install site
[INFO] Scanning for projects...

[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
...

$</pre>
</div>
<p>The generated documentation is available at <tt>alfredo/target/alfredo-0.1.2-docs</tt>.</p>
<p>Copy documentation directory to a temporary location.</p>
<div class="source"><pre>$ cp -r alfredo/target/alfredo-0.1.2-docs /tmp/a012docs/

$</pre>
</div>
<p>Checkout the <tt>gh-pages</tt> branch and clean working directory.</p>
<div class="source"><pre>$ git checkout gh-pages
Switched to branch 'gh-pages'

$ git clean -d -f
Removing alfredo/
Removing examples/
Removing target/

$</pre>
</div>
<p>Remove <tt>docs/latest/</tt> directory and commit the removal.</p>
<div class="source"><pre>$ rm -rf docs/latest
$ git add -u
$ git commit -m &quot;cleaning latest&quot;
[gh-pages 5243411] cleaning latest
 84 files changed, 0 insertions(+), 12013 deletions(-)
 delete mode 100644 docs/latest/BuildingIt.html
 ...
 delete mode 100644 docs/latest/images/newwindow.png
 delete mode 100644 docs/latest/index.html

$</pre>
</div>
<p>Copy the new documentation set from the temporary location, add the new documentation files to Git and commit them.</p>
<div class="source"><pre>$ cp -r /tmp/a012docs/* .

$ git status
# On branch gh-pages
# Your branch is ahead of 'temp/xdocs' by 2 commits.
#
# Untracked files:
#   (use &quot;git add &lt;file&gt;...&quot; to include in what will be committed)
#
#       docs/0.1.2/
#       docs/latest/
nothing added to commit but untracked files present (use &quot;git add&quot; to track)

$ git add index.html docs/*

$ git commit -m &quot;docs 0.1.2&quot;
[gh-pages 55193ef] docs 0.1.2
 170 files changed, 24066 insertions(+), 0 deletions(-)
 create mode 100644 docs/0.1.2/BuildingIt.html
 ...
 create mode 100644 docs/latest/index.html

$</pre>
</div>
<p>Check the documentation locally by, then push the documentation to GitHub.</p>
<div class="source"><pre>$ git push origin gh-pages:gh-pages

$</pre>
</div>
<p>Check the site looks properly: <a class="externalLink" href="http://cloudera.github.com/alfredo">Alfredo GitHub site</a>.</p>
<p>[ <a href="index.html">Go Back</a> ]</p>
</div>
</div>
</div>

      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">&#169;  
          2012
    
          Cloudera Inc.
          
  

  
    
            
  
    
   - <a href="http://maven.apache.org/privacy-policy.html">Privacy Policy</a></div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
